# 🎲 랜덤 디펜스: 다이스 가디언즈

## 1. 게임 개요

### 컨셉
골드로 랜덤 유닛을 소환하고, 같은 등급끼리 합성해 강력한 유닛을 만들어 밀려오는 적 웨이브를 막는 한국 스타일 랜덤 디펜스 게임.

### 핵심 재미
- **랜덤성**: 어떤 유닛이 나올지 모르는 도박 쾌감
- **전략**: 제한된 슬롯에서 합성 타이밍과 배치 최적화
- **성장감**: 커먼 유닛들이 레전드리로 진화하는 만족감
- **긴장감**: 웨이브가 갈수록 빡빡해지는 난이도 곡선

### 타겟 유저
- 캐주얼~미드코어 모바일/웹 게이머
- 랜덤 다이스, 럭키 디펜스 등 한국 랜덤 디펜스 장르 팬
- 점심시간/이동 중 10~20분 플레이

---

## 2. 핵심 메카닉

### 2.1 유닛 소환 시스템
- **소환 비용**: 50G (고정)
- **소환 결과**: 랜덤으로 유닛 종류 + 등급 결정
- **등급 확률**:

| 등급 | 확률 | 색상 |
|------|------|------|
| ⭐ 커먼 | 55% | 회색 |
| ⭐⭐ 레어 | 30% | 파랑 |
| ⭐⭐⭐ 에픽 | 12% | 보라 |
| ⭐⭐⭐⭐ 레전드 | 3% | 금색 |

- 5성(미시크)은 합성으로만 획득 가능
- 유닛 종류는 5종 중 균등 확률 (각 20%)

### 2.2 합성 시스템
- **같은 등급 유닛 2개** → 드래그로 겹치면 **상위 등급 1개**로 합성
- 합성 결과 유닛 종류는 **랜덤** (핵심 전략 요소)
- 합성 비용: **무료** (슬롯 절약 효과가 비용)
- 최대 합성: 4성 + 4성 → 5성 (미시크)

### 2.3 유닛 배치
- **필드 슬롯**: 15칸 (3×5 그리드)
- 드래그앤드롭으로 슬롯 간 이동
- 슬롯이 가득 찬 상태에서 소환 불가 → 합성 or 판매 필요
- **유닛 판매**: 소환 비용의 50% 회수 (25G)

### 2.4 유닛 종류 및 스탯

#### 🗡️ 전사 (근접 - 경로 인접 배치)

| 등급 | ATK | 공속(초) | 범위(px) | 특수능력 |
|------|-----|---------|---------|---------|
| ⭐ | 15 | 0.8 | 60 | - |
| ⭐⭐ | 35 | 0.7 | 65 | 10% 확률 2배 데미지 |
| ⭐⭐⭐ | 80 | 0.6 | 70 | 20% 확률 2배 데미지 |
| ⭐⭐⭐⭐ | 180 | 0.5 | 80 | 30% 확률 3배 데미지 + 스턴 0.5초 |
| ⭐⭐⭐⭐⭐ | 400 | 0.4 | 90 | 40% 확률 3배 데미지 + 스턴 1초 + 주변 스플래시 |

#### 🏹 궁수 (원거리 - 빠른 공속)

| 등급 | ATK | 공속(초) | 범위(px) | 특수능력 |
|------|-----|---------|---------|---------|
| ⭐ | 8 | 0.5 | 150 | - |
| ⭐⭐ | 18 | 0.45 | 160 | 2연사 (두 번째 화살 50% 데미지) |
| ⭐⭐⭐ | 40 | 0.4 | 170 | 3연사 |
| ⭐⭐⭐⭐ | 90 | 0.35 | 180 | 4연사 + 관통 (2마리) |
| ⭐⭐⭐⭐⭐ | 200 | 0.3 | 200 | 5연사 + 관통 (전체) + 치명타 15% |

#### 🔮 마법사 (범위 - 스플래시 데미지)

| 등급 | ATK | 공속(초) | 범위(px) | 특수능력 |
|------|-----|---------|---------|---------|
| ⭐ | 12 | 1.2 | 120 | 스플래시 30px |
| ⭐⭐ | 28 | 1.1 | 130 | 스플래시 40px |
| ⭐⭐⭐ | 65 | 1.0 | 140 | 스플래시 50px + 둔화 20% 1초 |
| ⭐⭐⭐⭐ | 150 | 0.9 | 150 | 스플래시 60px + 둔화 30% 2초 |
| ⭐⭐⭐⭐⭐ | 350 | 0.8 | 170 | 스플래시 80px + 둔화 50% 2초 + 도트 50/초 |

#### 💚 서포터 (버프 - 인접 유닛 강화)

| 등급 | ATK | 공속(초) | 범위(px) | 특수능력 |
|------|-----|---------|---------|---------|
| ⭐ | 5 | 1.5 | 100 | 인접 유닛 ATK +10% |
| ⭐⭐ | 10 | 1.4 | 110 | 인접 유닛 ATK +15%, 공속 +5% |
| ⭐⭐⭐ | 22 | 1.3 | 120 | 인접 유닛 ATK +25%, 공속 +10% |
| ⭐⭐⭐⭐ | 50 | 1.2 | 130 | 인접 유닛 ATK +35%, 공속 +15%, 범위 +10% |
| ⭐⭐⭐⭐⭐ | 120 | 1.0 | 150 | 전체 유닛 ATK +20%, 인접 ATK +50%, 공속 +20% |

#### ⚡ 특수 (디버프 - 적 약화)

| 등급 | ATK | 공속(초) | 범위(px) | 특수능력 |
|------|-----|---------|---------|---------|
| ⭐ | 10 | 1.0 | 130 | 적 이속 -15% 2초 |
| ⭐⭐ | 22 | 0.9 | 140 | 적 이속 -20% 2초 + 방어력 -10% |
| ⭐⭐⭐ | 50 | 0.85 | 150 | 적 이속 -30% 3초 + 방어력 -20% |
| ⭐⭐⭐⭐ | 110 | 0.8 | 160 | 적 이속 -40% 3초 + 방어력 -30% + 독 30/초 |
| ⭐⭐⭐⭐⭐ | 250 | 0.7 | 180 | 적 이속 -50% 4초 + 방어력 -40% + 독 80/초 + 주기적 빙결 |

### 2.5 DPS 비교 (등급별 기대값)

| 등급 | 전사 | 궁수 | 마법사 | 서포터 | 특수 |
|------|------|------|--------|--------|------|
| ⭐ | 18.8 | 16.0 | 10.0 | 3.3 | 10.0 |
| ⭐⭐ | 55.0 | 60.0 | 25.5 | 7.1 | 24.4 |
| ⭐⭐⭐ | 160.0 | 150.0 | 65.0 | 16.9 | 58.8 |
| ⭐⭐⭐⭐ | 468.0 | 360.0 | 166.7 | 41.7 | 137.5 |
| ⭐⭐⭐⭐⭐ | 1400.0 | 1000.0 | 437.5 | 120.0 | 357.1 |

> DPS는 특수능력 보정 전 기본값. 서포터/특수는 시너지 기여도가 핵심.

---

## 3. 웨이브 시스템

### 3.1 총 웨이브: 25 웨이브

### 3.2 적 유형

| 유형 | 이속 | HP 배율 | 방어력 | 특성 |
|------|------|---------|--------|------|
| 🟢 일반 | 1.0x | 1.0x | 0 | 기본 |
| 🔵 빠름 | 1.8x | 0.6x | 0 | 빠르지만 약함 |
| 🔴 탱크 | 0.6x | 2.5x | 10 | 느리지만 단단함 |
| 🟡 비행 | 1.2x | 0.8x | 0 | 근접 유닛 공격 불가 |
| 💀 보스 | 0.5x | 8.0x | 20 | 매 5웨이브 |

### 3.3 웨이브 테이블

| 웨이브 | 적 유형 | 마릿수 | 기본 HP | 총 HP | 보상(G) |
|--------|---------|--------|---------|-------|---------|
| 1 | 일반 | 8 | 50 | 400 | 80 |
| 2 | 일반 | 10 | 65 | 650 | 90 |
| 3 | 빠름 | 12 | 40 | 480 | 85 |
| 4 | 일반+탱크 | 8+2 | 80/200 | 1040 | 100 |
| **5** | **💀 보스** | **1** | **800** | **800** | **150** |
| 6 | 일반 | 12 | 100 | 1200 | 110 |
| 7 | 빠름 | 15 | 70 | 1050 | 105 |
| 8 | 탱크 | 6 | 350 | 2100 | 120 |
| 9 | 일반+비행 | 10+5 | 130/100 | 1800 | 115 |
| **10** | **💀 보스** | **1+4** | **2000/150** | **2600** | **200** |
| 11 | 빠름+일반 | 15+8 | 100/170 | 2860 | 130 |
| 12 | 탱크+비행 | 5+8 | 500/150 | 3700 | 140 |
| 13 | 일반 | 20 | 200 | 4000 | 135 |
| 14 | 빠름 | 25 | 130 | 3250 | 130 |
| **15** | **💀 보스** | **1+8** | **5000/200** | **6600** | **300** |
| 16 | 탱크+일반 | 6+12 | 700/250 | 7200 | 160 |
| 17 | 비행 | 20 | 250 | 5000 | 150 |
| 18 | 빠름+탱크 | 20+4 | 180/800 | 6800 | 165 |
| 19 | 전체혼합 | 25 | 350 | 8750 | 170 |
| **20** | **💀 보스** | **2+10** | **8000/300** | **19000** | **400** |
| 21 | 탱크 | 10 | 1200 | 12000 | 190 |
| 22 | 빠름+비행 | 20+15 | 300/280 | 10200 | 185 |
| 23 | 전체혼합 | 30 | 500 | 15000 | 200 |
| 24 | 탱크+빠름 | 8+20 | 1500/400 | 20000 | 210 |
| **25** | **💀 최종보스** | **1** | **50000** | **50000** | **WIN** |

### 3.4 난이도 곡선
- **W1~5**: 튜토리얼. 커먼 유닛으로 클리어 가능
- **W6~10**: 레어 이상 필요. 합성 시작
- **W11~15**: 에픽 유닛 1~2개 필수
- **W16~20**: 레전드 필요. 배치 최적화 중요
- **W21~25**: 미시크 없이는 거의 불가능

### 3.5 적 스폰 간격
- 적 간 스폰 간격: 0.8초
- 웨이브 간 준비 시간: 8초 (스킵 가능 → 보너스 골드 20G)

---

## 4. 경제 시스템

### 4.1 골드 획득

| 소스 | 획득량 |
|------|--------|
| 적 처치 (일반) | 5G |
| 적 처치 (빠름) | 4G |
| 적 처치 (탱크) | 8G |
| 적 처치 (비행) | 6G |
| 적 처치 (보스) | 50G |
| 웨이브 클리어 보너스 | 테이블 참고 |
| 웨이브 스킵 보너스 | 20G |
| 유닛 판매 | 25G |

### 4.2 비용

| 행동 | 비용 |
|------|------|
| 유닛 소환 | 50G |
| 합성 | 무료 |
| 유닛 판매 | -25G 회수 |

### 4.3 시작 자원
- **시작 골드**: 150G (3회 소환 가능)
- **라이프**: 20 (적이 끝까지 통과 시 -1, 보스는 -5)

### 4.4 밸런스 설계 원칙
- 웨이브 N 클리어 시 누적 골드 ≈ `100 + N × 80`G
- 소환 횟수 기대값: 웨이브 10까지 약 16회 → 15슬롯 풀 + 합성 1~2회
- 레전드 확보 기대 시점: 웨이브 12~15 (합성 경로 포함)
- 미시크 확보 기대 시점: 웨이브 18~22

---

## 5. UI/UX

### 5.1 화면 레이아웃 (세로 모드 우선)

```
┌─────────────────────────────┐
│  💰 1250G    ❤️ 18    🌊 W12  │  ← 상단 HUD
├─────────────────────────────┤
│                             │
│     ╔═══════════════╗       │
│     ║   경로 맵     ║       │
│     ║  (S자 경로)   ║       │
│     ╚═══════════════╝       │
│                             │
├─────────────────────────────┤
│  [유닛][유닛][유닛][유닛][유닛] │  ← 유닛 슬롯 그리드
│  [유닛][유닛][유닛][유닛][유닛] │     3×5 = 15칸
│  [유닛][유닛][유닛][유닛][유닛] │
├─────────────────────────────┤
│  [🎲 소환 50G]  [⏭️ 스킵]   │  ← 하단 액션 바
│  [💰 판매]      [ℹ️ 정보]   │
└─────────────────────────────┘
```

### 5.2 인터랙션
- **소환**: 하단 버튼 탭 → 빈 슬롯에 자동 배치 + 등급 연출
- **합성**: 유닛 A를 같은 등급 유닛 B 위로 드래그 → 합성 확인 → 결과 연출
- **배치 이동**: 유닛을 빈 슬롯으로 드래그
- **판매**: 유닛을 판매 버튼 위로 드래그 or 유닛 롱프레스 → 판매 확인
- **정보**: 유닛 탭 → 스탯 팝업

### 5.3 모바일 대응
- 터치 드래그앤드롭 (touch events)
- 최소 터치 타겟: 44×44px
- 세로 모드 기본, 가로 모드 지원
- 반응형 레이아웃 (뷰포트 기반 스케일링)

---

## 6. 아트 스타일

### 6.1 스타일: 심플 벡터 + 미니멀

MVP에 최적화된 심플한 기하학적 도형 기반 아트.

- **유닛**: 원형 베이스 + 아이콘 (검, 활, 지팡이, 하트, 번개)
- **적**: 사각형/삼각형 기반 실루엣
- **맵**: 클린한 타일 기반 경로
- **이펙트**: 파티클 (원, 선) 최소한으로

### 6.2 색상 팔레트

| 용도 | 색상 | HEX |
|------|------|-----|
| 배경 | 다크 네이비 | `#1a1a2e` |
| 경로 | 따뜻한 베이지 | `#e8d5b7` |
| 커먼 | 회색 | `#9e9e9e` |
| 레어 | 스카이블루 | `#42a5f5` |
| 에픽 | 퍼플 | `#ab47bc` |
| 레전드 | 골드 | `#ffd54f` |
| 미시크 | 레드 그라데이션 | `#ff5252` → `#ff1744` |
| 전사 | 레드 | `#ef5350` |
| 궁수 | 그린 | `#66bb6a` |
| 마법사 | 블루 | `#5c6bc0` |
| 서포터 | 옐로우 | `#ffee58` |
| 특수 | 시안 | `#26c6da` |
| 적 (일반) | 연두 | `#8bc34a` |
| 적 (보스) | 크림슨 | `#d32f2f` |
| UI 텍스트 | 화이트 | `#fafafa` |
| UI 배경 | 다크 그레이 | `#2d2d44` |

---

## 7. 기술 스택

### 7.1 비교

| 항목 | Phaser.js | PixiJS | 순수 Canvas |
|------|-----------|--------|-------------|
| 학습 곡선 | 중간 | 중간 | 낮음 |
| 2D 게임 기능 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |
| 성능 | 좋음 (WebGL) | 최고 (WebGL) | 보통 |
| 씬 관리 | 내장 | 없음 | 없음 |
| 물리엔진 | 내장 (Arcade) | 없음 | 없음 |
| 파일 크기 | ~1MB | ~500KB | 0 |
| 모바일 지원 | 우수 | 우수 | 보통 |
| TD 게임 적합 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐ |
| 커뮤니티/예제 | 풍부 | 보통 | 제한적 |

### 7.2 추천: **Phaser 3**

**이유:**
1. 씬 관리, 입력 처리, 타이머 등 게임 필수 기능 내장
2. 드래그앤드롭 내장 지원
3. TD 게임 예제/튜토리얼 풍부
4. itch.io 배포 간편 (HTML5 export)
5. 경로 추적(Path Following) 내장

### 7.3 기술 스택 상세

```
Phaser 3.80+          - 게임 엔진
Vite                   - 빌드 도구 (HMR, 빠른 번들링)
TypeScript             - 타입 안정성 (선택)
Howler.js              - 오디오 (Phaser 내장도 가능)
```

### 7.4 프로젝트 구조

```
random-defense/
├── src/
│   ├── main.ts              # Phaser 게임 설정
│   ├── scenes/
│   │   ├── Boot.ts          # 에셋 로딩
│   │   ├── Game.ts          # 메인 게임 씬
│   │   ├── GameOver.ts      # 게임오버
│   │   └── Victory.ts       # 승리
│   ├── entities/
│   │   ├── Unit.ts          # 유닛 클래스
│   │   ├── Enemy.ts         # 적 클래스
│   │   └── Projectile.ts    # 투사체
│   ├── systems/
│   │   ├── WaveManager.ts   # 웨이브 관리
│   │   ├── EconomyManager.ts # 골드/비용
│   │   ├── SummonSystem.ts  # 소환/확률
│   │   └── MergeSystem.ts   # 합성
│   ├── ui/
│   │   ├── HUD.ts           # 상단 정보
│   │   ├── UnitSlots.ts     # 유닛 그리드
│   │   └── ActionBar.ts     # 하단 버튼
│   ├── data/
│   │   ├── units.json       # 유닛 스탯 데이터
│   │   ├── waves.json       # 웨이브 데이터
│   │   └── config.json      # 밸런스 상수
│   └── utils/
│       └── PathHelper.ts    # 경로 계산
├── public/
│   └── assets/              # 스프라이트, 사운드
├── index.html
├── package.json
└── vite.config.ts
```

---

## 8. MVP 개발 로드맵

### Week 1: 핵심 플레이 루프

| 일차 | 작업 | 산출물 |
|------|------|--------|
| D1 | 프로젝트 셋업 (Vite + Phaser3), 기본 씬 | 빈 게임 화면 |
| D2 | S자 경로 맵, 적 스폰 & 경로 이동 | 적이 맵을 따라 이동 |
| D3 | 유닛 슬롯 그리드, 소환 시스템 (랜덤 등급/종류) | 버튼 누르면 유닛 소환 |
| D4 | 유닛 공격 AI (범위 내 적 탐지 → 공격) | 유닛이 적을 자동 공격 |
| D5 | 웨이브 시스템 (W1~W10), 골드 경제 | 10웨이브 플레이 가능 |
| D6 | 드래그앤드롭 (배치 이동 + 합성) | 유닛 합성 동작 |
| D7 | 플레이테스트 & 버그 수정, W11~W25 | 전체 웨이브 플레이 가능 |

### Week 2: 폴리시 & 배포

| 일차 | 작업 | 산출물 |
|------|------|--------|
| D8 | 유닛 특수능력 구현 (스턴, 둔화, 연사 등) | 모든 유닛 능력 동작 |
| D9 | UI 폴리시 (HUD, 등급 색상, 소환 연출) | 비주얼 완성 |
| D10 | 밸런스 튜닝 (스프레드시트 기반 조정) | 난이도 곡선 확인 |
| D11 | 사운드 이펙트, 배경음악 (무료 에셋) | 오디오 완성 |
| D12 | 모바일 터치 최적화, 반응형 레이아웃 | 모바일 플레이 가능 |
| D13 | 게임오버/승리 화면, 재시작 | 완전한 게임 루프 |
| D14 | itch.io 빌드 & 배포, README | **출시** 🚀 |

---

## 9. 수익화 & 확장

### 9.1 초기 수익화
- **itch.io PWYW**: $0 기본, 도네이션 가능
- 게임 내 광고 없음 (MVP)

### 9.2 확장 가능성 (v2+)

| 기능 | 난이도 | 기대 효과 |
|------|--------|-----------|
| 무한 모드 | 쉬움 | 리플레이성 극대화 |
| 로컬 랭킹 (localStorage) | 쉬움 | 경쟁 요소 |
| 온라인 랭킹 (Firebase) | 중간 | 바이럴 |
| 유닛 도감 | 쉬움 | 수집 욕구 |
| 새 유닛 추가 | 쉬움 | 콘텐츠 확장 |
| 맵 선택 (3종) | 중간 | 다양성 |
| PvP 대전 (1v1) | 어려움 | 장기 리텐션 |
| 모바일 앱 래핑 (Capacitor) | 중간 | 모바일 스토어 진출 |
| 광고 삽입 (웨이브 간 리워드 광고) | 쉬움 | 수익 |

### 9.3 KPI 목표 (출시 1개월)
- itch.io 페이지 조회: 1,000+
- 플레이 수: 500+
- 평균 플레이 타임: 15분+
- 도네이션: $10+ (있으면 좋고)

---

## 부록: 밸런스 시뮬레이션

### 웨이브별 예상 플레이어 전력

| 웨이브 | 누적 골드 | 소환 횟수 | 예상 구성 | 예상 총 DPS |
|--------|-----------|-----------|-----------|-------------|
| 5 | ~600G | 12 | 커먼 8 + 레어 2 | ~200 |
| 10 | ~1,400G | 24 | 레어 6 + 에픽 2 | ~550 |
| 15 | ~2,800G | 40 | 에픽 4 + 레전드 1 | ~1,200 |
| 20 | ~4,500G | 60 | 레전드 3 + 에픽 4 | ~2,500 |
| 25 | ~6,500G | 80 | 미시크 1 + 레전드 4 | ~5,000 |

### 필요 DPS vs 웨이브

적이 경로를 통과하는 데 약 12초 소요. 웨이브 클리어에 필요한 DPS:

| 웨이브 | 총 HP | 필요 DPS (12초 기준) | 여유율 |
|--------|-------|---------------------|--------|
| 5 (보스) | 800 | 67 | 3.0x ✅ |
| 10 (보스) | 2,600 | 217 | 2.5x ✅ |
| 15 (보스) | 6,600 | 550 | 2.2x ✅ |
| 20 (보스) | 19,000 | 1,583 | 1.6x ⚠️ |
| 25 (최종) | 50,000 | 4,167 | 1.2x 🔥 |

> 여유율 1.5x 이상 = 쾌적, 1.0~1.5x = 긴장감, <1.0x = 실패 가능

---

*문서 버전: v1.0 | 작성일: 2026-02-20 | 프로젝트: 다이스 가디언즈*
